<?phpuse Reviews\Application\Reviews\Models\Review;use Reviews\Foundation\Config;// Testimonials$branches = Config::get('reviews.branches');$posts = $wpdb->get_results("SELECT * FROM vn48_posts WHERE post_type = 'ttshowcase' AND post_content <> ''");foreach ($posts as $post) {	if ( ! trim($post->post_content)) {		continue;	}	$meta = $wpdb->get_results("SELECT * FROM vn48_postmeta WHERE post_id = {$post->ID}");	$branch = $wpdb->get_row("		SELECT 			t.* 		FROM vn48_term_relationships AS r 			INNER JOIN vn48_term_taxonomy AS tt ON tt.term_id = r.term_taxonomy_id			INNER JOIN vn48_terms AS t ON t.term_id = tt.term_id		WHERE r.object_id = {$post->ID}");	$info = [];	foreach ($meta as $mt) {		$info[$mt->meta_key] = $mt->meta_value;	}	if (!$info['_aditional_info_rating']) {		continue;	}	$status = ucfirst($post->post_status);	if ($status == 'Publish') {		$status = 'Published';	}	if ( ! in_array($status, ['Pending', 'Published'])) {		$status = 'Declined';	}	Review::create([		'author' => $post->post_title,		'email' => $info['_aditional_info_email'],		'phone' => $info['_aditional_info_url'],		'region' => in_array($branch->name, $branches['wa']) ? 'wa' : 'sa',		'branch' => $branch->name,		'content' => $post->post_content,		'rating' => $info['_aditional_info_rating'],		'status' => $status,		'created_at' => $post->post_date	]);}$questions = [	1 => 'author',	2 => 'phone',	12 => 'email',	4 => 'branch',	3 => 'rating',	7 => 'vacuumed',	8 => 'windscreens',	9 => 'tyres',	10 => 'dash',	11 => 'recommend',	5 => 'content'];$leads = $wpdb->get_results("SELECT * FROM vn48_rg_lead WHERE form_id = 9");foreach ($leads as $lead) {	$answers = $wpdb->get_results("SELECT * FROM vn48_rg_lead_detail WHERE lead_id = {$lead->id}");	$content = $wpdb->get_row("SELECT * FROM vn48_rg_lead_detail_long WHERE lead_detail_id = {$lead->id}");	foreach ($answers as $answer) {		if (!isset($questions[$answer->field_number])) {			continue;		}		$form[$questions[$answer->field_number]] = $answer->value;	}	$form['created_at'] = $lead->date_created;	$form['questionnaire'] = [		'vacuumed' => $form['vacuumed'],		'windscreens' => $form['windscreens'],		'tyres' => $form['tyres'],		'dash' => $form['dash'],		'recommend' => $recommend	];	$form['status'] = $lead->status == 'active' ? 'Published' : 'Pending';	$form['region'] = in_array($branch->name, $branches['wa']) ? 'wa' : 'sa';		Review::create($form);}